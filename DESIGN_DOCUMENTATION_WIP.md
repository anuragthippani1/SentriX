# SentriX - Design Documentation (Work in Progress)

> **Status**: ğŸš§ In Development - Approximately 40% Complete  
> **Last Updated**: October 24, 2024  
> **Version**: 0.4.0-alpha

## Project Overview

**SentriX** is a Real-Time Supply Chain Risk Intelligence Platform that provides comprehensive geopolitical and supply chain risk analysis powered by AI. The system monitors global risks, analyzes shipping routes, and generates detailed risk reports to support informed decision-making.

### Current Implementation Status

- âœ… Core API endpoints implemented
- âœ… Basic frontend UI components
- âœ… MongoDB integration
- âœ… AI agent system (partial)
- ğŸš§ Report generation (in progress)
- ğŸš§ Dashboard visualizations (in progress)
- â³ Advanced analytics (planned)
- â³ Multi-user authentication (planned)
- â³ Real-time notifications (planned)

---

## Table of Contents

1. [System Architecture Diagram](#1-system-architecture-diagram)
2. [Overall Block Diagram](#2-overall-block-diagram)
3. [Data Flow Diagram](#3-data-flow-diagram)
4. [Component Architecture](#4-component-architecture)
5. [UML Diagrams](#5-uml-diagrams) _(Partial)_
6. [Database Schema](#6-database-schema)
7. [API Architecture](#7-api-architecture)
8. [Agent System Architecture](#8-agent-system-architecture) _(In Progress)_

---

## 1. System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SENTRIX PLATFORM (v0.4)                         â”‚
â”‚                   Real-Time Risk Intelligence System                     â”‚
â”‚                        [DEVELOPMENT IN PROGRESS]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRESENTATION LAYER [âœ… 70% Complete]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Home Page  â”‚  â”‚  Dashboard   â”‚  â”‚   Reports    â”‚  â”‚  Assistant   â”‚ â”‚
â”‚  â”‚      âœ…      â”‚  â”‚     ğŸš§       â”‚  â”‚      âœ…      â”‚  â”‚      âœ…      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Thinking     â”‚  â”‚  Session     â”‚  â”‚  World Map   â”‚                   â”‚
â”‚  â”‚   Logs âœ…    â”‚  â”‚  Manager âœ…  â”‚  â”‚   (Basic) ğŸš§ â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                            â”‚
â”‚  â³ TODO: Advanced filtering, Export features, User profiles              â”‚
â”‚                                                                            â”‚
â”‚  Technology: React.js, Tailwind CSS, Context API                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â–²
                                      â”‚
                                      â”‚ REST API / SSE
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY LAYER [âœ… 85% Complete]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚                          FastAPI Application                               â”‚
â”‚                                                                            â”‚
â”‚  âœ… Implemented Endpoints:                                                â”‚
â”‚     /api/query              - Basic query processing                      â”‚
â”‚     /api/query/stream       - Streaming responses (SSE)                   â”‚
â”‚     /api/dashboard          - Dashboard data (sample data)                â”‚
â”‚     /api/reports            - Report CRUD operations                      â”‚
â”‚     /api/sessions           - Session management                          â”‚
â”‚                                                                            â”‚
â”‚  ğŸš§ In Progress:                                                          â”‚
â”‚     /api/reports/download   - PDF/DOCX generation (partially working)    â”‚
â”‚     /api/shipment/upload    - File upload validation                      â”‚
â”‚                                                                            â”‚
â”‚  â³ Planned:                                                              â”‚
â”‚     /api/analytics          - Advanced analytics endpoints                â”‚
â”‚     /api/notifications      - Real-time alerts                            â”‚
â”‚     /api/users              - User management (future)                    â”‚
â”‚                                                                            â”‚
â”‚  Technology: FastAPI, Uvicorn, Python 3.13, CORS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â–²
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUSINESS LOGIC LAYER [ğŸš§ 45% Complete]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      AI AGENT SYSTEM                                â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   Assistant     â”‚  â”‚   Political     â”‚  â”‚   Scheduler     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   Agent âœ…      â”‚  â”‚   Risk Agent    â”‚  â”‚   Agent âœ…      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚      ğŸš§         â”‚  â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ âœ… NL Query     â”‚  â”‚ ğŸš§ Risk Analysisâ”‚  â”‚ âœ… Schedule     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ âœ… Streaming    â”‚  â”‚ â³ News Scrapingâ”‚  â”‚    Analysis     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ âœ… Route Anal   â”‚  â”‚ â³ Risk Scoring â”‚  â”‚ âœ… Delay Calc   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚   Reporting     â”‚  â”‚    Chatbot      â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚   Agent ğŸš§      â”‚  â”‚    Manager âœ…   â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚ âœ… Basic Report â”‚  â”‚ âœ… Intent Class â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚ ğŸš§ PDF Export   â”‚  â”‚ âœ… Query Route  â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚ â³ DOCX Export  â”‚  â”‚                 â”‚                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â³ TODO:                                                                 â”‚
â”‚     - Complete risk scoring algorithm                                     â”‚
â”‚     - Implement news data scraping                                        â”‚
â”‚     - Add caching layer for agent responses                               â”‚
â”‚     - Improve error handling and retries                                  â”‚
â”‚                                                                            â”‚
â”‚  Technology: Python, Anthropic Claude API (configured), AsyncIO           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â–²
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA PERSISTENCE LAYER [âœ… 60% Complete]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                MongoDB Database (Basic Setup)                       â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  âœ… Implemented Collections:                                       â”‚  â”‚
â”‚  â”‚     - reports (CRUD operations working)                            â”‚  â”‚
â”‚  â”‚     - sessions (Basic management)                                  â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  ğŸš§ In Progress:                                                   â”‚  â”‚
â”‚  â”‚     - world_risk_data (Sample data only)                           â”‚  â”‚
â”‚  â”‚     - Indexing optimization                                        â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â³ Planned:                                                       â”‚  â”‚
â”‚  â”‚     - users collection (Authentication)                            â”‚  â”‚
â”‚  â”‚     - notifications collection                                     â”‚  â”‚
â”‚  â”‚     - audit_logs collection                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                File System Storage (Partial)                        â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  âœ… reports_data/ - JSON metadata storage                          â”‚  â”‚
â”‚  â”‚  ğŸš§ reports/ - PDF/DOCX generation (in progress)                   â”‚  â”‚
â”‚  â”‚  â³ uploads/ - User file uploads (planned)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  Technology: MongoDB (Motor), AsyncIO, Local File System                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â–²
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES LAYER [ğŸš§ 30% Complete]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  âœ… Configured:                                                           â”‚
â”‚     - Anthropic Claude API (Basic integration)                            â”‚
â”‚                                                                            â”‚
â”‚  ğŸš§ In Progress:                                                          â”‚
â”‚     - OpenAI API (Fallback option)                                        â”‚
â”‚     - News APIs (API keys pending)                                        â”‚
â”‚                                                                            â”‚
â”‚  â³ Planned:                                                              â”‚
â”‚     - Weather data APIs                                                   â”‚
â”‚     - Shipping route APIs                                                 â”‚
â”‚     - Financial data APIs                                                 â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Overall Block Diagram

```
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘         USER INTERFACE LAYER          â•‘
                    â•‘          [70% Complete]               â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚  Dashboard  â”‚      â”‚  Assistant â”‚     â”‚   Reports   â”‚
         â”‚     ğŸš§      â”‚      â”‚     âœ…     â”‚     â”‚     âœ…      â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚                    â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚ REST/SSE
                                     â”‚
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘          API GATEWAY LAYER            â•‘
                    â•‘          [85% Complete]               â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚   Query     â”‚      â”‚  Session   â”‚     â”‚  Dashboard  â”‚
         â”‚ Processor âœ…â”‚      â”‚ Manager âœ… â”‚     â”‚ Service ğŸš§  â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚                    â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘       BUSINESS LOGIC LAYER            â•‘
                    â•‘       [45% Complete]                  â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚  Chatbot    â”‚      â”‚ Assistant  â”‚     â”‚ Political   â”‚
         â”‚ Manager âœ…  â”‚      â”‚  Agent âœ…  â”‚     â”‚ Risk Agt ğŸš§â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”‚
         â”‚ Scheduler   â”‚      â”‚ Reporting  â”‚            â”‚
         â”‚  Agent âœ…   â”‚      â”‚  Agent ğŸš§  â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
                â”‚                    â”‚                    â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘        DATA PERSISTENCE LAYER         â•‘
                    â•‘        [60% Complete]                 â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚   MongoDB   â”‚      â”‚ File Systemâ”‚     â”‚   Cache     â”‚
         â”‚  Database   â”‚      â”‚ Storage ğŸš§ â”‚     â”‚  Layer â³   â”‚
         â”‚     âœ…      â”‚      â”‚            â”‚     â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
âœ… Completed    ğŸš§ In Progress    â³ Planned/TODO
```

---

## 3. Data Flow Diagram

### 3.1 User Query Processing Flow (Implemented)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Enter Query
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Chat Panel    â”‚
â”‚   (Frontend) âœ… â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. HTTP POST /api/query
     â”‚    {query: "...", session_id: "..."}
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway âœ… â”‚
â”‚   (FastAPI)     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. Route to Chatbot Manager âœ…
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Chatbot      â”‚
â”‚   Manager âœ…    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Classify Intent âœ…
     â”‚    (assistant | political | schedule | combined)
     â–¼
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚              â”‚              â”‚              â”‚
     â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Assistantâ”‚   â”‚Politicalâ”‚   â”‚Schedule â”‚   â”‚Combined â”‚
â”‚Agent âœ… â”‚   â”‚Agt ğŸš§   â”‚   â”‚Agent âœ… â”‚   â”‚Rpt ğŸš§   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚             â”‚             â”‚             â”‚
     â”‚ 5. Process  â”‚ 5. Analyze  â”‚ 5. Analyze  â”‚ 5. Generate
     â”‚             â”‚    (TODO:   â”‚             â”‚    (Partial)
     â”‚             â”‚    complete â”‚             â”‚
     â”‚             â”‚    scoring) â”‚             â”‚
     â–¼             â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        LLM Service (Claude API) âœ… Configured       â”‚
â”‚                                                     â”‚
â”‚  âœ… Natural Language Processing                    â”‚
â”‚  ğŸš§ Risk Analysis (Basic only)                     â”‚
â”‚  ğŸš§ Report Generation (In progress)                â”‚
â”‚  â³ Advanced Recommendations (TODO)                â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. Store Results âœ…
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB âœ…     â”‚
â”‚   Database      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 7. Return Response âœ…
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 8. Send to Frontend âœ…
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Dashboard Data Flow (Partial Implementation)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Navigate to Dashboard âœ…
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Dashboard      â”‚
â”‚   Component ğŸš§   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Load Data âœ…
     â”‚    GET /api/dashboard
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Gateway âœ… â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. Fetch Data
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Dashboard      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   MongoDB ğŸš§     â”‚
â”‚   Service ğŸš§     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ NOTE: Currently returns sample data
     â”‚ TODO: Implement real-time data aggregation
     â”‚
     â”‚ 4. Return Sample Data âœ…
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend       â”‚
â”‚   - Heatmap ğŸš§   â”‚  â† TODO: Country highlighting incomplete
â”‚   - Tables âœ…    â”‚  â† Basic tables working
â”‚   - Charts ğŸš§    â”‚  â† Need more data sources
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Report Generation Flow (In Progress)

```
User Query â†’ Chatbot Manager âœ… â†’ Political Risk Agent ğŸš§
                    â”‚                    â”‚
                    â”‚                    â”œâ”€â”€â†’ Extract Countries âœ…
                    â”‚                    â”‚
                    â–¼                    â–¼
            Scheduler Agent âœ…      News/Data APIs â³
                    â”‚               (TODO: Integrate)
                    â”‚
                    â–¼
            Analyze Schedule âœ…
                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    Reporting Agent ğŸš§
                           â”‚
                           â”œâ”€â”€â†’ Generate Report âœ… (Basic)
                           â”‚    TODO: Enhanced formatting
                           â”‚
                           â–¼
                    MongoDB Database âœ…
                           â”‚
                           â”œâ”€â”€â†’ Store Report âœ…
                           â”‚
                           â–¼
                    File System ğŸš§
                           â”‚
                           â”œâ”€â”€â†’ Generate PDF ğŸš§ (In Progress)
                           â”œâ”€â”€â†’ Generate DOCX â³ (TODO)
                           â”‚
                           â–¼
                    Return to User âœ…
```

---

## 4. Component Architecture

### 4.1 Frontend Component Hierarchy (Partial)

```
App.js âœ…
â”‚
â”œâ”€â”€ DashboardProvider (Context) âœ…
â”‚   â”‚
â”‚   â”œâ”€â”€ Navbar.js âœ…
â”‚   â”‚   â”œâ”€â”€ Logo âœ…
â”‚   â”‚   â”œâ”€â”€ Navigation Items âœ…
â”‚   â”‚   â””â”€â”€ Session Info âœ…
â”‚   â”‚
â”‚   â”œâ”€â”€ Routes âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Home.js âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ Hero Section âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ Stats Cards âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ Quick Actions âœ…
â”‚   â”‚   â”‚   â””â”€â”€ Footer âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Dashboard.js ğŸš§
â”‚   â”‚   â”‚   â”œâ”€â”€ WorldMap.js ğŸš§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SVG Map âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Country Highlighting ğŸš§ (Incomplete)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Route Plotting â³ (TODO)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Tooltips âœ…
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ RiskTables.js âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Political Risk Table âœ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Schedule Risk Table âœ…
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ RiskCharts.js ğŸš§
â”‚   â”‚   â”‚       â”œâ”€â”€ Bar Charts ğŸš§ (Basic only)
â”‚   â”‚   â”‚       â””â”€â”€ Pie Charts ğŸš§ (Basic only)
â”‚   â”‚   â”‚       â””â”€â”€ â³ TODO: Time series charts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ SentriXAssistantPage.js âœ…
â”‚   â”‚   â”‚   â””â”€â”€ ChatPanel.js âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Reports.js âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ Report List âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ Report Details âœ…
â”‚   â”‚   â”‚   â””â”€â”€ Download Buttons ğŸš§ (Partial)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ThinkingLogs.js âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ SessionManagerPage.js âœ…
â”‚   â”‚       â””â”€â”€ SessionManager.js âœ…
â”‚   â”‚
â”‚   â””â”€â”€ LoadingSpinner.js âœ…

â³ TODO Components:
   - UserProfile.js (Planned)
   - Settings.js (Planned)
   - NotificationPanel.js (Planned)
   - ExportWizard.js (Planned)
```

### 4.2 Backend Component Structure (Partial)

```
main.py (FastAPI App) âœ…
â”‚
â”œâ”€â”€ Middleware âœ…
â”‚   â””â”€â”€ CORS Configuration âœ…
â”‚
â”œâ”€â”€ API Endpoints (85% Complete)
â”‚   â”œâ”€â”€ /api/query âœ…
â”‚   â”œâ”€â”€ /api/query/stream âœ…
â”‚   â”œâ”€â”€ /api/dashboard âœ… (Sample data)
â”‚   â”œâ”€â”€ /api/reports âœ…
â”‚   â”œâ”€â”€ /api/sessions âœ…
â”‚   â”œâ”€â”€ /api/shipment/upload ğŸš§ (Basic validation)
â”‚   â””â”€â”€ â³ /api/analytics (Planned)
â”‚
â”œâ”€â”€ Agent System (45% Complete)
â”‚   â”‚
â”‚   â”œâ”€â”€ chatbot_manager.py âœ…
â”‚   â”‚   â”œâ”€â”€ classify_intent() âœ…
â”‚   â”‚   â””â”€â”€ route_query() âœ…
â”‚   â”‚
â”‚   â”œâ”€â”€ assistant_agent.py âœ…
â”‚   â”‚   â”œâ”€â”€ process_query() âœ…
â”‚   â”‚   â”œâ”€â”€ process_query_streaming() âœ…
â”‚   â”‚   â”œâ”€â”€ _analyze_route() âœ…
â”‚   â”‚   â””â”€â”€ _generate_response() âœ…
â”‚   â”‚
â”‚   â”œâ”€â”€ political_risk_agent.py ğŸš§
â”‚   â”‚   â”œâ”€â”€ analyze_risks() ğŸš§ (Basic implementation)
â”‚   â”‚   â”œâ”€â”€ fetch_news_data() â³ (TODO)
â”‚   â”‚   â””â”€â”€ score_risk() â³ (TODO - algorithm incomplete)
â”‚   â”‚
â”‚   â”œâ”€â”€ scheduler_agent.py âœ…
â”‚   â”‚   â”œâ”€â”€ analyze_schedule_risks() âœ…
â”‚   â”‚   â”œâ”€â”€ extract_countries() âœ…
â”‚   â”‚   â””â”€â”€ calculate_delays() âœ…
â”‚   â”‚
â”‚   â””â”€â”€ reporting_agent.py ğŸš§
â”‚       â”œâ”€â”€ generate_combined_report() ğŸš§
â”‚       â”œâ”€â”€ generate_political_report() âœ…
â”‚       â”œâ”€â”€ generate_schedule_report() âœ…
â”‚       â”œâ”€â”€ create_pdf() ğŸš§ (In progress)
â”‚       â””â”€â”€ create_docx() â³ (TODO)
â”‚
â”œâ”€â”€ Database Layer âœ…
â”‚   â””â”€â”€ mongodb.py âœ…
â”‚       â”œâ”€â”€ store_report() âœ…
â”‚       â”œâ”€â”€ get_all_reports() âœ…
â”‚       â”œâ”€â”€ create_session() âœ…
â”‚       â””â”€â”€ get_all_sessions() âœ…
â”‚
â””â”€â”€ Data Models âœ…
    â””â”€â”€ schemas.py âœ…
        â”œâ”€â”€ QueryRequest âœ…
        â”œâ”€â”€ PoliticalRisk âœ…
        â”œâ”€â”€ ScheduleRisk âœ…
        â”œâ”€â”€ RiskReport âœ…
        â””â”€â”€ Session âœ…
```

---

## 5. UML Diagrams (Partial)

### 5.1 Class Diagram (Core Models Only)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   << Pydantic Model >> âœ…                    â”‚
â”‚                        QueryRequest                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - query: str                                                 â”‚
â”‚ - session_id: Optional[str]                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   << Pydantic Model >> âœ…                    â”‚
â”‚                       PoliticalRisk                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - country: str                                               â”‚
â”‚ - risk_type: str                                             â”‚
â”‚ - likelihood_score: int                                      â”‚
â”‚ - reasoning: str                                             â”‚
â”‚ - publication_date: str                                      â”‚
â”‚ - source_title: str                                          â”‚
â”‚ - source_url: str                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   << Pydantic Model >> âœ…                    â”‚
â”‚                       ScheduleRisk                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - equipment_id: str                                          â”‚
â”‚ - country: str                                               â”‚
â”‚ - original_delivery_date: str                                â”‚
â”‚ - current_delivery_date: str                                 â”‚
â”‚ - delay_days: int                                            â”‚
â”‚ - risk_level: int                                            â”‚
â”‚ - risk_factors: List[str]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ChatbotManager âœ…                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + classify_intent(query: str): str                           â”‚
â”‚ + route_query(query: str): Agent                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ uses
                            â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    Agent (Abstract) ğŸš§        â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ + process_query()             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–³
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AssistantAgent  â”‚ â”‚PoliticalRiskAgtâ”‚ â”‚ SchedulerAgent    â”‚
â”‚      âœ…         â”‚ â”‚      ğŸš§        â”‚ â”‚       âœ…          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚+ process_query()â”‚ â”‚+ analyze_risks()â”‚ â”‚+ analyze_scheduleâ”‚
â”‚+ streaming()    â”‚ â”‚  (incomplete)  â”‚ â”‚+ extract_countriesâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â³ TODO: Complete agent inheritance hierarchy
â³ TODO: Add interface definitions for external services
```

### 5.2 Sequence Diagram - Query Processing (Implemented)

```
User     Frontend   API       Chatbot    Assistant   MongoDB
  â”‚         â”‚        â”‚         Manager      Agent       â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚â”€â”€Queryâ”€â”€â–¶â”‚  âœ…   â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚â”€â”€POSTâ”€â”€â–¶â”‚  âœ…       â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚â”€â”€classifyâ”€â”€â–¶â”‚  âœ…      â”‚         â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚â—€â”€â”€returnâ”€â”€â”€â”¤  âœ…      â”‚         â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€processâ”€â”€â–¶â”‚  âœ…    â”‚
  â”‚         â”‚        â”‚            â”‚   query   â”‚         â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚â”€â”€LLMâ”€â”€â”€â”€â–¶
  â”‚         â”‚        â”‚            â”‚           â”‚  âœ…     â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  âœ…    â”‚
  â”‚         â”‚        â”‚            â”‚  response â”‚         â”‚
  â”‚         â”‚        â”‚            â”‚           â”‚         â”‚
  â”‚         â”‚        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€storeâ”€â”€â–¶
  â”‚         â”‚        â”‚                         â”‚  âœ…    â”‚
  â”‚         â”‚        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚         â”‚        â”‚                         â”‚   ok   â”‚
  â”‚         â”‚â—€â”€â”€JSONâ”€â”¤  âœ…                     â”‚        â”‚
  â”‚         â”‚        â”‚                         â”‚        â”‚
  â”‚â—€â”€Displayâ”¤  âœ…    â”‚                         â”‚        â”‚
  â”‚         â”‚        â”‚                         â”‚        â”‚

NOTE: Political risk agent integration incomplete
TODO: Add error handling sequence
TODO: Add timeout handling
```

---

## 6. Database Schema

### 6.1 MongoDB Collections (Implemented)

#### Reports Collection âœ…

```javascript
{
  "_id": ObjectId("..."),
  "report_id": "uuid-string",
  "session_id": "uuid-string",
  "report_type": "political" | "schedule" | "combined",
  "created_at": ISODate("2024-10-24T..."),
  "title": "Risk Report - Political Analysis",
  "executive_summary": "Summary text...",
  "political_risks": [
    {
      "country": "Russia",
      "risk_type": "Geopolitical",
      "likelihood_score": 4,
      "reasoning": "Active military conflict...",
      "publication_date": "2024-10-20",
      "source_title": "UN Security Council Report",
      "source_url": "https://..."
    }
  ],
  "schedule_risks": [...],  // âœ… Working
  "world_risk_data": {...}, // ğŸš§ Sample data only
  "recommendations": [...]  // âœ… Basic recommendations
}

// â³ TODO: Add indexes for performance
// â³ TODO: Add validation rules
// â³ TODO: Implement data archival strategy
```

#### Sessions Collection âœ…

```javascript
{
  "_id": ObjectId("..."),
  "session_id": "uuid-string",
  "name": "Morning Analysis Session",
  "description": "Risk assessment for Q4 shipments",
  "created_at": ISODate("2024-10-24T08:00:00Z"),
  "updated_at": ISODate("2024-10-24T10:30:00Z"),
  "is_active": true,
  "report_count": 5,
  "last_activity": ISODate("2024-10-24T10:30:00Z")
}

// â³ TODO: Add user_id field (when auth implemented)
// â³ TODO: Add session tags/categories
```

### 6.2 File System Structure (Partial)

```
backend/
â”œâ”€â”€ reports/                      ğŸš§ In Progress
â”‚   â”œâ”€â”€ {report_id}.pdf          ğŸš§ PDF generation incomplete
â”‚   â””â”€â”€ {report_id}.docx         â³ TODO: DOCX generation
â”‚
â””â”€â”€ reports_data/                 âœ… Working
    â””â”€â”€ {report_id}.json         âœ… JSON storage working

â³ TODO: Implement cloud storage (S3/GCS)
â³ TODO: Add file cleanup cron job
â³ TODO: Implement file versioning
```

---

## 7. API Architecture

### 7.1 REST API Endpoints (Current Implementation)

| Status | Method | Endpoint                     | Description           | Notes                          |
| ------ | ------ | ---------------------------- | --------------------- | ------------------------------ |
| âœ…     | GET    | `/`                          | Health check          | Fully working                  |
| âœ…     | POST   | `/api/query`                 | Process user query    | Basic implementation           |
| âœ…     | POST   | `/api/query/stream`          | Stream response (SSE) | Working with Claude            |
| ğŸš§     | GET    | `/api/dashboard`             | Get dashboard data    | Returns sample data            |
| âœ…     | GET    | `/api/reports`               | Get all reports       | Pagination needed              |
| âœ…     | GET    | `/api/reports/{id}`          | Get specific report   | Working                        |
| ğŸš§     | GET    | `/api/reports/{id}/download` | Download report       | PDF generation incomplete      |
| âœ…     | POST   | `/api/sessions`              | Create new session    | Working                        |
| âœ…     | GET    | `/api/sessions`              | Get all sessions      | Working                        |
| âœ…     | GET    | `/api/sessions/{id}`         | Get session by ID     | Working                        |
| âœ…     | PUT    | `/api/sessions/{id}`         | Update session        | Working                        |
| âœ…     | DELETE | `/api/sessions/{id}`         | Delete session        | Working                        |
| ğŸš§     | POST   | `/api/shipment/upload`       | Upload shipment data  | Basic validation only          |
| âœ…     | POST   | `/api/shipment/reset`        | Reset shipment data   | Working                        |
| â³     | GET    | `/api/analytics`             | Analytics data        | Planned for v0.5               |
| â³     | POST   | `/api/users`                 | User management       | Planned (authentication first) |

### 7.2 Known Issues & TODOs

```
ğŸ› KNOWN ISSUES:
- Dashboard returns static sample data instead of real-time data
- PDF generation fails for reports >50 pages
- Streaming sometimes disconnects on slow connections
- Rate limiting not implemented

â³ TODO (High Priority):
- Implement proper error responses with error codes
- Add request validation middleware
- Add API versioning (/api/v1/)
- Implement rate limiting
- Add API documentation (Swagger/OpenAPI)

â³ TODO (Medium Priority):
- Add request logging
- Implement response caching
- Add health check for dependencies
- Implement graceful shutdown
```

---

## 8. Agent System Architecture (In Progress)

### 8.1 Multi-Agent System Design (Partial Implementation)

```
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚      User Query Input âœ…    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚    Chatbot Manager âœ…       â”‚
                  â”‚  (Intent Classification)    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                   â”‚                   â”‚
            â–¼                   â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Assistant      â”‚ â”‚  Political Risk â”‚ â”‚  Scheduler      â”‚
  â”‚  Agent âœ…       â”‚ â”‚  Agent ğŸš§       â”‚ â”‚  Agent âœ…       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ âœ… Route        â”‚ â”‚ ğŸš§ Country      â”‚ â”‚ âœ… Equipment    â”‚
  â”‚    Analysis     â”‚ â”‚    Analysis     â”‚ â”‚    Tracking     â”‚
  â”‚ âœ… General Q&A  â”‚ â”‚ â³ News Scrapingâ”‚ â”‚ âœ… Delay Calc   â”‚
  â”‚ âœ… Streaming    â”‚ â”‚ â³ Risk Scoring â”‚ â”‚ âœ… Risk Level   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Reporting Agent ğŸš§        â”‚
                  â”‚  (Partial Implementation)   â”‚
                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                  â”‚ âœ… Aggregate Results        â”‚
                  â”‚ âœ… Generate Summary         â”‚
                  â”‚ ğŸš§ Create Recommendations   â”‚
                  â”‚ ğŸš§ Export PDF (Incomplete)  â”‚
                  â”‚ â³ Export DOCX (TODO)       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Data Persistence âœ…       â”‚
                  â”‚   (MongoDB + Files)         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Implementation Status by Agent

#### Assistant Agent âœ… (95% Complete)

- âœ… Natural language query processing
- âœ… Route analysis with detailed breakdown
- âœ… Streaming response support (SSE)
- âœ… Integration with Claude API
- ğŸš§ Context awareness across sessions (partial)
- â³ Multi-turn conversation memory (planned)

#### Political Risk Agent ğŸš§ (30% Complete)

- âœ… Basic country identification
- ğŸš§ Risk scoring algorithm (incomplete)
- â³ News data scraping (TODO)
- â³ Real-time data sources integration (TODO)
- â³ Historical trend analysis (TODO)

#### Scheduler Agent âœ… (80% Complete)

- âœ… Equipment tracking
- âœ… Delay calculation
- âœ… Country extraction from shipment data
- âœ… Risk level assessment
- ğŸš§ Predictive delay estimation (in progress)
- â³ Route optimization suggestions (planned)

#### Reporting Agent ğŸš§ (50% Complete)

- âœ… Basic report generation
- âœ… Executive summary creation
- âœ… Data aggregation from multiple agents
- ğŸš§ PDF generation (formatting issues)
- â³ DOCX generation (not started)
- â³ Custom templates (planned)
- â³ Scheduled reports (planned)

#### Chatbot Manager âœ… (100% Complete)

- âœ… Intent classification
- âœ… Query routing
- âœ… Context management
- âœ… Error handling

---

## 9. Technology Stack Summary

### Frontend âœ… (70% Complete)

- **Framework**: React 18+ âœ…
- **Routing**: React Router v6 âœ…
- **State Management**: React Context API âœ…
- **Styling**: Tailwind CSS 3.x âœ…
- **Charts**: Recharts âœ… (Basic implementation)
- **Maps**: react-simple-maps âœ… (Needs enhancement)
- **HTTP Client**: Fetch API âœ…
- **Icons**: Lucide React âœ…

â³ TODO: Add Redux for complex state management
â³ TODO: Implement error boundary components
â³ TODO: Add unit tests (Jest + React Testing Library)

### Backend ğŸš§ (60% Complete)

- **Framework**: FastAPI 0.110+ âœ…
- **Server**: Uvicorn (ASGI) âœ…
- **Language**: Python 3.13 âœ…
- **Async Runtime**: AsyncIO âœ…
- **Validation**: Pydantic 2.7+ âœ…

â³ TODO: Add comprehensive error handling
â³ TODO: Implement request logging
â³ TODO: Add unit tests (pytest)
â³ TODO: Add API documentation generation

### AI/ML ğŸš§ (40% Complete)

- **LLM Provider**: Anthropic Claude API âœ… (Configured)
- **Alternative**: OpenAI GPT-4 API ğŸš§ (Partial integration)
- **Streaming**: Server-Sent Events (SSE) âœ…

â³ TODO: Implement fallback mechanism between APIs
â³ TODO: Add response caching
â³ TODO: Optimize token usage

### Database âœ… (70% Complete)

- **Primary**: MongoDB 4.7+ (Motor driver) âœ…
- **Cache**: In-memory dictionaries ğŸš§
- **File Storage**: Local filesystem âœ…

â³ TODO: Implement Redis for caching
â³ TODO: Add database backup automation
â³ TODO: Implement data migration scripts

---

## 10. Development Roadmap

### Phase 1 (Current - v0.4) ğŸš§

- âœ… Core API endpoints
- âœ… Basic frontend UI
- âœ… MongoDB integration
- ğŸš§ Agent system (partial)
- ğŸš§ Report generation (basic)

### Phase 2 (Next - v0.5) â³

- Complete political risk agent
- Implement news data scraping
- Enhance dashboard visualizations
- Complete PDF/DOCX generation
- Add data caching layer

### Phase 3 (Future - v0.6) â³

- User authentication & authorization
- Multi-user support
- Real-time notifications
- Advanced analytics
- Mobile responsiveness

### Phase 4 (Future - v1.0) â³

- Production deployment
- Performance optimization
- Comprehensive testing
- Documentation completion
- Security audit

---

## 11. Known Limitations

### Current Limitations

1. **Data Sources** ğŸš§

   - Using sample data for risk analysis
   - No real-time news integration yet
   - Limited historical data

2. **Performance** ğŸš§

   - No caching implemented
   - Database queries not optimized
   - Large reports may timeout

3. **Features** ğŸš§

   - No user authentication
   - Limited export formats
   - Basic error handling

4. **Scalability** â³
   - Single instance deployment
   - No load balancing
   - No horizontal scaling support

---

## 12. Testing Status

### Unit Tests â³ (0% Complete)

- Backend: Not started
- Frontend: Not started

### Integration Tests â³ (0% Complete)

- API endpoints: Not started
- Agent interactions: Not started

### E2E Tests â³ (0% Complete)

- User workflows: Not started

â³ TODO: Set up testing framework
â³ TODO: Write test cases
â³ TODO: Implement CI/CD pipeline

---

## Conclusion

**SentriX is currently at approximately 40% completion**. The core infrastructure is in place with:

âœ… **Completed:**

- Basic API structure
- Frontend UI framework
- Database integration
- Core agent system
- Session management

ğŸš§ **In Progress:**

- Advanced agent capabilities
- Report generation
- Dashboard visualizations
- PDF/DOCX export

â³ **Planned:**

- User authentication
- Real-time data integration
- Advanced analytics
- Production deployment
- Comprehensive testing

The system demonstrates core functionality but requires significant development in data integration, agent intelligence, and production readiness before being deployment-ready.

---

**Document Version**: 0.4.0-alpha  
**Completion Status**: ~40%  
**Last Updated**: October 24, 2024  
**Next Review**: November 2024

---

## Quick Reference - Implementation Checklist

### High Priority (Next 2 weeks)

- [ ] Complete PDF generation
- [ ] Implement news API integration
- [ ] Fix dashboard real-time data
- [ ] Add comprehensive error handling
- [ ] Optimize database queries

### Medium Priority (Next month)

- [ ] Complete DOCX generation
- [ ] Add data caching layer
- [ ] Implement API rate limiting
- [ ] Add unit tests (backend)
- [ ] Enhance map visualizations

### Low Priority (Future)

- [ ] User authentication
- [ ] Advanced analytics
- [ ] Mobile app support
- [ ] Multi-language support
- [ ] Cloud deployment setup



